# Bridge Builder Design

## Overview
The Bridge Builder is a system for automatically generating "Dream Bridge" comparison documents (like `DMI_ARI_HECTOR.MD`) from the structured analysis of two separate corpora.

## Inputs
The system requires two completed **Corpus Analysis JSON** files (generated by `skills/CORPUS_ANALYSIS.MD`):
1.  **Corpus A Analysis**: `mystic_corpus/<corpus_a>/analysis/<corpus_a>_analysis.json`
2.  **Corpus B Analysis**: `mystic_corpus/<corpus_b>/analysis/<corpus_b>_analysis.json`

## Process Flow

### 1. Metaphor Alignment
The system identifies common metaphors between the two corpora.
*   **Method**: Fuzzy matching of "keywords" in `major_recurring_metaphors`.
*   **Manual Override**: Allow a configuration file to map disparate terms (e.g., "Water" in A maps to "Fluidity" in B).

### 2. Divergence Analysis (LLM Task)
For each aligned metaphor, the system uses an LLM (Martian Persona) to generate the **"Crossing the Dream Bridge"** section.
*   **Prompt**:
    > You are a Martian Interviewer.
    > Compare the following two descriptions of [Metaphor]:
    > **Corpus A**: [Description + Recapitulation + Bridge A]
    > **Corpus B**: [Description + Recapitulation + Bridge B]
    >
    > Identify the **divergence** in stance or function. How does the *feeling* differ?
    > Synthesize the difference in a short paragraph.

### 3. Structural Synthesis
The systems compiles the **"Overarching Structural Comparison"** section by extracting data directly from `structural_dimensions` in the JSONs.
*   **Field Mapping**:
    *   `Rhetorical Mode` -> A vs B
    *   `Emotional Register` -> A vs B
    *   `Direction of Attention` -> A vs B
    *   `Core Verb` -> A vs B

### 4. Final Summary Generation (LLM Task)
The system generates the **"Summary: The Dream Bridge"** section.
*   **Prompt**:
    > Based on the divergences identified above, write a synthesis of how [Author A] and [Author B] relate.
    > What is the fundamental "Base Camp" for each?
    > Where do they meet?

## Output Artifact
The system generates a Markdown file following the `skills/ARI_DREAM_BRIDGE_TEMPLATE.MD` format.

**Storage Location**:
*   **Default**: `bridges/<corpus_a>/DMI_<CORPUS_A>_<CORPUS_B>.MD`
*   **Naming Convention**: `DMI_[CORPUS_A]_[CORPUS_B].MD`

## Automation Tool (`tools/build_bridge.py`)
A Python script to orchestrate this process.

**Command**:
```bash
python tools/build_bridge.py --corpus-a ari --corpus-b hector --output bridges/ari/DMI_ARI_HECTOR.MD
```

**Requirements**:
*   Access to the `mystic_corpus` directory.
*   Access to an LLM API (for the divergence and summary generation).
